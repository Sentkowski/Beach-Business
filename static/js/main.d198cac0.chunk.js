(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/shop-image-red.d764fd60.svg"},23:function(e,t,a){e.exports=a.p+"static/media/shop-image-blue.4888b5c2.svg"},24:function(e,t,a){e.exports=a.p+"static/media/shop-image-white.e9e6089b.svg"},25:function(e,t,a){e.exports=a.p+"static/media/beach.45e8695a.svg"},29:function(e,t,a){e.exports=a(48)},34:function(e,t,a){},35:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(17),c=a.n(o),i=(a(34),a(26)),l=a(18),s=a(19),u=a(27),h=a(20),m=a(28),p=a(4),d=(a(35),a(36),a(6)),f=a(22),y=a.n(f),v=a(23),b=a.n(v),S=a(24),g=a.n(S),k=a(25),E=a.n(k);function T(){return r.a.createElement("nav",{className:"nav-belt"},r.a.createElement("div",{className:"belt-red-circle"}),r.a.createElement("div",{className:"belt-white-circle"}))}function x(e){return r.a.createElement("ul",{className:"ranking-container"},r.a.createElement("li",{key:e.ranking[0].name,className:t(e.ranking[0].name)},e.ranking[0].name," \u2013 ",e.ranking[0].money,"$"),r.a.createElement("li",{key:e.ranking[1].name,className:t(e.ranking[1].name)},e.ranking[1].name," \u2013 ",e.ranking[1].money,"$"),r.a.createElement("li",{key:e.ranking[2].name,className:t(e.ranking[2].name)},e.ranking[2].name," \u2013 ",e.ranking[2].money,"$"));function t(e){return"You"===e?"ranking-me":"ranking-others"}}function B(e){return r.a.createElement("ul",{className:"turn-overview"},e.sequence.map(function(n){return r.a.createElement("li",{key:n,className:"player-turn-container "+a(n)},r.a.createElement("p",null,n),n in e.placedShops&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"placed-shop-number"},e.placedShops[n]),r.a.createElement("img",{className:"placed-shop-image",src:t(n)})),!(n in e.placedShops)&&r.a.createElement("img",{src:t(n)}))}));function t(e){return"You"===e?b.a:y.a}function a(e){if("You"===e)return"shop-name-blue"}}function N(e){return e.myShopPlaced&&!e.buttonBlocked?r.a.createElement("button",{onClick:e.handleClick,className:"turn-button"},"End turn"):r.a.createElement("button",{className:"turn-button",disabled:!0},"Place your shop")}function w(e){var t=0,a=0;return document.querySelector(".chart")&&(t=document.querySelector(".chart").offsetHeight-15,a=document.querySelector(".chart").offsetWidth-15),console.log(n(e.incomeHistory,"You")),r.a.createElement("div",{className:"chart"},r.a.createElement(d.b,{margin:10,height:t,width:a},r.a.createElement(d.a,{color:"#FF6666",data:n(e.incomeHistory,"Mark")}),r.a.createElement(d.a,{color:"#FF6666",data:n(e.incomeHistory,"John")}),r.a.createElement(d.a,{color:"#2EC4B6",data:n(e.incomeHistory,"You")})));function n(e,t){if(0!=e.length){for(var a=[{x:0,y:0}],n=0;n<e.length;n++){var r=o(e[n],t),c=a[n].y+r;a.push({x:n+1,y:c})}return a}}function o(e,t){var a=0,n=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var l=c.value;l.player===t&&(a+=l.income)}}catch(s){r=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}}function M(e){var t=0;return r.a.createElement("div",{className:"beach-container"},r.a.createElement("img",{className:"beach-image",src:E.a}),e.sectors.map(function(a){return r.a.createElement(Y,{buttonDisabled:e.buttonDisabled,placedShops:e.placedShops,handleClick:e.handleClick,customers:a,number:t+=1})}))}function Y(e){return r.a.createElement("button",{"data-num":e.number,disabled:e.buttonDisabled,className:function(a){if(t(a)){for(var n in e.placedShops)if("You"===n&&e.placedShops[n]==a)return"players sector";return"computers sector"}return"sector"}(e.number),onClick:e.handleClick},r.a.createElement("p",null,e.number),t(e.number),r.a.createElement("p",null,e.customers));function t(t){var a=0;for(var n in e.placedShops)e.placedShops[n]==t&&a++;return 1===a?r.a.createElement("img",{src:g.a}):a>1?r.a.createElement("p",null,"Contested"):void 0}}function O(e){var t=function(e,t){for(var a=[],n=0;n<t.length;n++){var r=[];for(var o in e){var c=Math.abs(n+1-e[o]);r.push({player:o,distanceToShop:c})}for(var i=[{distanceToShop:void 0,player:void 0}],l=r,s=0;s<l.length;s++){var u=l[s];u.distanceToShop<i[0].distanceToShop||void 0===i[0].distanceToShop?i=[u]:u.distanceToShop===i[0].distanceToShop&&i.push(u)}for(var h=Math.floor(t[n]/i.length),m=i,p=0;p<m.length;p++){var d=m[p];a.push({player:d.player,income:h})}}return a}(e.placedShops,e.beach),a=[{name:"John",money:n(t,"John")},{name:"Mark",money:n(t,"Mark")},{name:"You",money:n(t,"You")}];return a.sort(function(e,t){return t.money-e.money}),e.shoudlRender?r.a.createElement("ol",{className:"income-message"},r.a.createElement("li",{className:o(a[0].name),key:a[0].name},a[0].name," +",a[0].money,"$"),r.a.createElement("li",{className:o(a[1].name),key:a[1].name},a[1].name," +",a[1].money,"$"),r.a.createElement("li",{className:o(a[2].name),key:a[2].name},a[2].name," +",a[2].money,"$")):null;function n(e,t){var a=0,n=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done);n=!0){var l=c.value;l.player===t&&(a+=l.income)}}catch(s){r=!0,o=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}return a}function o(e){return"You"===e?"my turn-result":"others turn-result"}}var j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentTurn:["John","Mark","You"],currentBeach:a.createBeachSectors(),placedShops:{Mark:1,John:2},incomeHistory:[],nextTurn:!1,buttonBlocked:!1},a.nextTurn=a.nextTurn.bind(Object(p.a)(Object(p.a)(a))),a.assignPlayerShop=a.assignPlayerShop.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"nextTurn",value:function(){this.setState({nextTurn:!0},this.continueTurn)}},{key:"countIncome",value:function(e){for(var t=[],a=0;a<this.state.currentBeach.length;a++){var n=[];for(var r in e){var o=Math.abs(a+1-e[r]);n.push({player:r,distanceToShop:o})}for(var c=[{distanceToShop:void 0,player:void 0}],i=n,l=0;l<i.length;l++){var s=i[l];s.distanceToShop<c[0].distanceToShop||void 0===c[0].distanceToShop?c=[s]:s.distanceToShop===c[0].distanceToShop&&c.push(s)}for(var u=Math.floor(this.state.currentBeach[a]/c.length),h=c,m=0;m<h.length;m++){var p=h[m];t.push({player:p.player,income:u})}}return t}},{key:"assignPlayerShop",value:function(e){var t=e.target.dataset.num;this.placeShop(t,"You")}},{key:"placeShop",value:function(e,t){var a=this.state.placedShops;a[t]=e,this.setState({placedShops:a})}},{key:"continueTurn",value:function(){var e=!0,t=!1,a=void 0;try{for(var n,r=this.state.currentTurn[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;if(o in this.state.placedShops||"You"==o){if("You"==o&&!("You"in this.state.placedShops))break}else this.computerMakeTurn(o)}}catch(c){t=!0,a=c}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}}},{key:"computerMakeTurn",value:function(e){var t,a=0;if(2!=this.state.currentTurn.indexOf(e)){var n=this.state.currentBeach.slice(0);for(var r in this.state.placedShops)n[this.state.placedShops[r]-1]=0;var o=Math.max.apply(Math,Object(i.a)(n));t=this.state.currentBeach.indexOf(o)+1}else for(var c=Object.assign({},this.state.placedShops),l=0;l<this.state.currentBeach.length;l++){c[e]=l+1;var s=this.countIncome(c),u=0,h=!0,m=!1,p=void 0;try{for(var d,f=s[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var y=d.value;y.player===e&&(u+=y.income)}}catch(v){m=!0,p=v}finally{try{h||null==f.return||f.return()}finally{if(m)throw p}}u>=a&&(a=u,t=l+1)}this.placeShop(t,e)}},{key:"shuffle",value:function(e){var t,a,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a;return e}},{key:"createBeachSectors",value:function(){for(var e=Math.floor(4*Math.random())+4,t=[],a=0;a<e;a++)t.push(5*Math.floor(19*Math.random()));return t}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.nextTurn&&Object.keys(this.state.placedShops).length===this.state.currentTurn.length){var t=this.countIncome(this.state.placedShops),a=this.state.incomeHistory.slice(0,this.state.incomeHistory.length);a.push(t),this.setState({nextTurn:!1,buttonBlocked:!0},function(){return setTimeout(function(){e.setState({currentTurn:e.shuffle(["John","You","Mark"]),currentBeach:e.createBeachSectors(),placedShops:{},incomeHistory:a,buttonBlocked:!1},e.continueTurn)},2e3)})}}},{key:"render",value:function(){for(var e=[{name:"John",money:0},{name:"Mark",money:0},{name:"You",money:0}],t=e,a=0;a<t.length;a++){var n=t[a],o=!0,c=!1,i=void 0;try{for(var l,s=this.state.incomeHistory[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,h=!0,m=!1,p=void 0;try{for(var d,f=u[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var y=d.value;y.player==n.name&&(n.money+=y.income)}}catch(v){m=!0,p=v}finally{try{h||null==f.return||f.return()}finally{if(m)throw p}}}}catch(v){c=!0,i=v}finally{try{o||null==s.return||s.return()}finally{if(c)throw i}}}return e.sort(function(e,t){return t.money-e.money}),r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{beach:this.state.currentBeach,placedShops:this.state.placedShops,shoudlRender:this.state.buttonBlocked,className:"message-container"}),r.a.createElement("section",{className:"App-grid"},r.a.createElement(T,null),r.a.createElement(x,{ranking:e}),r.a.createElement(B,{placedShops:this.state.placedShops,sequence:this.state.currentTurn}),r.a.createElement(N,{buttonBlocked:this.state.buttonBlocked,handleClick:this.nextTurn,myShopPlaced:"You"in this.state.placedShops}),r.a.createElement(w,{incomeHistory:this.state.incomeHistory}),r.a.createElement(M,{buttonDisabled:this.state.buttonBlocked,handleClick:this.assignPlayerShop,placedShops:this.state.placedShops,sectors:this.state.currentBeach})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.d198cac0.chunk.js.map