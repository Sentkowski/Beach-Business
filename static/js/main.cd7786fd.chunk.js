(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n.p+"static/media/shop-image-red.d764fd60.svg"},function(e,t,n){e.exports=n.p+"static/media/shop-image-blue.4888b5c2.svg"},function(e,t,n){e.exports=n.p+"static/media/shop-image-white.e9e6089b.svg"},function(e,t,n){e.exports=n.p+"static/media/beach.45e8695a.svg"},,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),i=(n(20),n(11)),s=n(4),l=n(5),u=n(12),h=n(6),m=n(13),p=n(1),d=(n(21),n(7)),f=n.n(d),v=n(8),y=n.n(v),b=n(9),k=n.n(b),S=n(10),g=n.n(S);function E(){return r.a.createElement("nav",{className:"nav-belt"},r.a.createElement("div",{className:"belt-red-circle"}),r.a.createElement("div",{className:"belt-white-circle"}))}function T(e){return r.a.createElement("ul",{className:"ranking-container"},r.a.createElement("li",{key:e.ranking[0].name,className:t(e.ranking[0].name)},e.ranking[0].name," \u2013 ",e.ranking[0].money,"$"),r.a.createElement("li",{key:e.ranking[1].name,className:t(e.ranking[1].name)},e.ranking[1].name," \u2013 ",e.ranking[1].money,"$"),r.a.createElement("li",{key:e.ranking[2].name,className:t(e.ranking[2].name)},e.ranking[2].name," \u2013 ",e.ranking[2].money,"$"));function t(e){return"You"===e?"ranking-me":"ranking-others"}}function x(e){return r.a.createElement("ul",{className:"turn-overview"},e.sequence.map(function(a){return r.a.createElement("li",{key:a,className:"player-turn-container "+n(a)},r.a.createElement("p",null,a),a in e.placedShops&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"placed-shop-number"},e.placedShops[a]),r.a.createElement("img",{className:"placed-shop-image",src:t(a)})),!(a in e.placedShops)&&r.a.createElement("img",{src:t(a)}))}));function t(e){return"You"===e?y.a:f.a}function n(e){if("You"===e)return"shop-name-blue"}}function B(e){return e.myShopPlaced&&!e.buttonBlocked?r.a.createElement("button",{onClick:e.handleClick,className:"turn-button"},"End turn"):r.a.createElement("button",{className:"turn-button",disabled:!0},"Place your shop")}function w(){return r.a.createElement("div",{className:"chart"})}function N(e){var t=0;return r.a.createElement("div",{className:"beach-container"},r.a.createElement("img",{className:"beach-image",src:g.a}),e.sectors.map(function(n){return r.a.createElement(M,{buttonDisabled:e.buttonDisabled,placedShops:e.placedShops,handleClick:e.handleClick,customers:n,number:t+=1})}))}function M(e){return r.a.createElement("button",{"data-num":e.number,disabled:e.buttonDisabled,className:function(n){if(t(n)){for(var a in e.placedShops)if("You"===a&&e.placedShops[a]==n)return"players sector";return"computers sector"}return"sector"}(e.number),onClick:e.handleClick},r.a.createElement("p",null,e.number),t(e.number),r.a.createElement("p",null,e.customers));function t(t){var n=0;for(var a in e.placedShops)e.placedShops[a]==t&&n++;return 1===n?r.a.createElement("img",{src:k.a}):n>1?r.a.createElement("p",null,"Contested"):void 0}}var O=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentTurn:["John","Mark","You"],currentBeach:n.createBeachSectors(),placedShops:{Mark:1,John:2},incomeHistory:[],nextTurn:!1,buttonBlocked:!1},n.nextTurn=n.nextTurn.bind(Object(p.a)(Object(p.a)(n))),n.assignPlayerShop=n.assignPlayerShop.bind(Object(p.a)(Object(p.a)(n))),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"nextTurn",value:function(){this.setState({nextTurn:!0},this.continueTurn)}},{key:"countIncome",value:function(e){for(var t=[],n=0;n<this.state.currentBeach.length;n++){var a=[];for(var r in e){var o=Math.abs(n+1-e[r]);a.push({player:r,distanceToShop:o})}for(var c=[{distanceToShop:void 0,player:void 0}],i=a,s=0;s<i.length;s++){var l=i[s];l.distanceToShop<c[0].distanceToShop||void 0===c[0].distanceToShop?c=[l]:l.distanceToShop===c[0].distanceToShop&&c.push(l)}for(var u=Math.floor(this.state.currentBeach[n]/c.length),h=c,m=0;m<h.length;m++){var p=h[m];t.push({player:p.player,income:u})}}return t}},{key:"assignPlayerShop",value:function(e){var t=e.target.dataset.num;this.placeShop(t,"You")}},{key:"placeShop",value:function(e,t){var n=this.state.placedShops;n[t]=e,this.setState({placedShops:n})}},{key:"continueTurn",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=this.state.currentTurn[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;if(o in this.state.placedShops||"You"==o){if("You"==o&&!("You"in this.state.placedShops))break}else this.computerMakeTurn(o)}}catch(c){t=!0,n=c}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"computerMakeTurn",value:function(e){var t,n=0;if(2!=this.state.currentTurn.indexOf(e)){var a=this.state.currentBeach.slice(0);for(var r in this.state.placedShops)a[this.state.placedShops[r]-1]=0;var o=Math.max.apply(Math,Object(i.a)(a));t=this.state.currentBeach.indexOf(o)+1}else for(var c=Object.assign({},this.state.placedShops),s=0;s<this.state.currentBeach.length;s++){c[e]=s+1;var l=this.countIncome(c),u=0,h=!0,m=!1,p=void 0;try{for(var d,f=l[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var v=d.value;v.player===e&&(u+=v.income)}}catch(y){m=!0,p=y}finally{try{h||null==f.return||f.return()}finally{if(m)throw p}}u>=n&&(n=u,t=s+1)}this.placeShop(t,e)}},{key:"shuffle",value:function(e){var t,n,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),n=e[a],e[a]=e[t],e[t]=n;return e}},{key:"createBeachSectors",value:function(){for(var e=Math.floor(4*Math.random())+4,t=[],n=0;n<e;n++)t.push(5*Math.floor(19*Math.random()));return t}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.nextTurn&&Object.keys(this.state.placedShops).length===this.state.currentTurn.length){var t=this.countIncome(this.state.placedShops),n=this.state.incomeHistory.slice(0,this.state.incomeHistory.length);n.push(t),this.setState({nextTurn:!1,buttonBlocked:!0},function(){return setTimeout(function(){e.setState({currentTurn:e.shuffle(["John","You","Mark"]),currentBeach:e.createBeachSectors(),placedShops:{},incomeHistory:n,buttonBlocked:!1},e.continueTurn)},750)})}}},{key:"render",value:function(){for(var e=[{name:"John",money:0},{name:"Mark",money:0},{name:"You",money:0}],t=e,n=0;n<t.length;n++){var a=t[n],o=!0,c=!1,i=void 0;try{for(var s,l=this.state.incomeHistory[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,h=!0,m=!1,p=void 0;try{for(var d,f=u[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var v=d.value;v.player==a.name&&(a.money+=v.income)}}catch(y){m=!0,p=y}finally{try{h||null==f.return||f.return()}finally{if(m)throw p}}}}catch(y){c=!0,i=y}finally{try{o||null==l.return||l.return()}finally{if(c)throw i}}}return e.sort(function(e,t){return t.money-e.money}),r.a.createElement("section",{className:"App-grid"},r.a.createElement(E,null),r.a.createElement(T,{ranking:e}),r.a.createElement(x,{placedShops:this.state.placedShops,sequence:this.state.currentTurn}),r.a.createElement(B,{buttonBlocked:this.state.buttonBlocked,handleClick:this.nextTurn,myShopPlaced:"You"in this.state.placedShops}),r.a.createElement(w,null),r.a.createElement(N,{buttonDisabled:this.state.buttonBlocked,handleClick:this.assignPlayerShop,placedShops:this.state.placedShops,sectors:this.state.currentBeach}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[14,1,2]]]);
//# sourceMappingURL=main.cd7786fd.chunk.js.map