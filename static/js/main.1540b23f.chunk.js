(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/shop-image-red.d764fd60.svg"},23:function(e,t,n){e.exports=n.p+"static/media/shop-image-blue.4888b5c2.svg"},24:function(e,t,n){e.exports=n.p+"static/media/shop-image-white.e9e6089b.svg"},25:function(e,t,n){e.exports=n.p+"static/media/beach.45e8695a.svg"},29:function(e,t,n){e.exports=n(48)},34:function(e,t,n){},35:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(17),c=n.n(o),i=(n(34),n(26)),s=n(18),l=n(19),u=n(27),h=n(20),m=n(28),d=n(4),p=(n(35),n(36),n(6)),f=n(22),y=n.n(f),v=n(23),b=n.n(v),k=n(24),S=n.n(k),g=n(25),E=n.n(g);function T(e){return e.showIntroduction?r.a.createElement("section",{className:"introduction-section"},r.a.createElement("p",{className:"introduction-text"},"You travel the world selling snacks on every possible beach. The problem is that John and Mark are doing the same!"),r.a.createElement("p",{className:"introduction-text"},"Sometimes you are the first on the spot, sometimes it is Mark or John. Place your shop to attract as many customers as you can."),r.a.createElement("p",{className:"introduction-text"},r.a.createElement("strong",{className:"introduction-important"},"Customers are lazy and visit the closest store. If there are a few shops equally near \u2013 profit is divided.")),r.a.createElement("p",{className:"introduction-text"},r.a.createElement("strong",{className:"introduction-important"},"NOTE: The number of customers is at the bottom of every beach sector.")),r.a.createElement("button",{onClick:e.handleClick,className:"introduction-close-button"},"Got it")):null}function N(){return r.a.createElement("nav",{className:"nav-belt"},r.a.createElement("div",{className:"belt-red-circle"}),r.a.createElement("div",{className:"belt-white-circle"}))}function w(e){return r.a.createElement("ul",{className:"ranking-container"},r.a.createElement("li",{key:e.ranking[0].name,className:t(e.ranking[0].name)},e.ranking[0].name," \u2013 ",e.ranking[0].money,"$"),r.a.createElement("li",{key:e.ranking[1].name,className:t(e.ranking[1].name)},e.ranking[1].name," \u2013 ",e.ranking[1].money,"$"),r.a.createElement("li",{key:e.ranking[2].name,className:t(e.ranking[2].name)},e.ranking[2].name," \u2013 ",e.ranking[2].money,"$"));function t(e){return"You"===e?"ranking-me":"ranking-others"}}function x(e){return r.a.createElement("ul",{className:"turn-overview"},e.sequence.map(function(a){return r.a.createElement("li",{key:a,className:"player-turn-container "+n(a)},r.a.createElement("p",null,a),a in e.placedShops&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"placed-shop-number"},e.placedShops[a]),r.a.createElement("img",{className:"placed-shop-image",alt:"An icon of a shop.",src:t(a)})),!(a in e.placedShops)&&r.a.createElement("img",{alt:"An icon of a shop.",src:t(a)}))}));function t(e){return"You"===e?b.a:y.a}function n(e){if("You"===e)return"shop-name-blue"}}function M(e){return e.myShopPlaced&&!e.buttonBlocked?r.a.createElement("button",{onClick:e.handleClick,className:"turn-button"},"End turn"):r.a.createElement("button",{className:"turn-button",disabled:!0},"Place your shop")}function B(e){var t=0,n=0;return document.querySelector(".chart")&&(t=document.querySelector(".chart").offsetHeight-15,n=document.querySelector(".chart").offsetWidth-15),r.a.createElement("div",{className:"chart"},r.a.createElement(p.b,{margin:10,height:t,width:n},r.a.createElement(p.a,{color:"#FF6666",data:a(e.incomeHistory,"Mark")}),r.a.createElement(p.a,{color:"#FF6666",data:a(e.incomeHistory,"John")}),r.a.createElement(p.a,{color:"#2EC4B6",data:a(e.incomeHistory,"You")})));function a(e,t){if(0!=e.length){for(var n=[{x:0,y:0}],a=0;a<e.length;a++){var r=o(e[a],t),c=n[a].y+r;n.push({x:a+1,y:c})}return n}}function o(e,t){var n=0,a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var s=c.value;s.player===t&&(n+=s.income)}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}}function Y(e){var t=0;return r.a.createElement("div",{className:"beach-container"},r.a.createElement("img",{alt:"A beach line.",className:"beach-image",src:E.a}),e.sectors.map(function(n){return r.a.createElement(C,{buttonDisabled:e.buttonDisabled,placedShops:e.placedShops,handleClick:e.handleClick,customers:n,number:t+=1})}))}function C(e){return r.a.createElement("button",{"data-num":e.number,disabled:e.buttonDisabled,className:function(n){if(t(n)){for(var a in e.placedShops)if("You"===a&&e.placedShops[a]==n)return"players sector";return"computers sector"}return"sector"}(e.number),onClick:e.handleClick},r.a.createElement("p",null,e.number),t(e.number),r.a.createElement("p",null,e.customers));function t(t){var n=0;for(var a in e.placedShops)e.placedShops[a]==t&&n++;return 1===n?r.a.createElement("img",{alt:"An icon of a shop.",src:S.a}):n>1?r.a.createElement("p",null,"Contested"):void 0}}function O(e){var t=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=[];for(var o in e){var c=Math.abs(a+1-e[o]);r.push({player:o,distanceToShop:c})}for(var i=[{distanceToShop:void 0,player:void 0}],s=r,l=0;l<s.length;l++){var u=s[l];u.distanceToShop<i[0].distanceToShop||void 0===i[0].distanceToShop?i=[u]:u.distanceToShop===i[0].distanceToShop&&i.push(u)}for(var h=Math.floor(t[a]/i.length),m=i,d=0;d<m.length;d++){var p=m[d];n.push({player:p.player,income:h})}}return n}(e.placedShops,e.beach),n=[{name:"John",money:a(t,"John")},{name:"Mark",money:a(t,"Mark")},{name:"You",money:a(t,"You")}];return n.sort(function(e,t){return t.money-e.money}),e.shoudlRender?r.a.createElement("ol",{className:"income-message"},r.a.createElement("li",{className:o(n[0].name),key:n[0].name},n[0].name," +",n[0].money,"$"),r.a.createElement("li",{className:o(n[1].name),key:n[1].name},n[1].name," +",n[1].money,"$"),r.a.createElement("li",{className:o(n[2].name),key:n[2].name},n[2].name," +",n[2].money,"$")):null;function a(e,t){var n=0,a=!0,r=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var s=c.value;s.player===t&&(n+=s.income)}}catch(l){r=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}function o(e){return"You"===e?"my turn-result":"others turn-result"}}var j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).hideIntroduction=function(){n.setState({showIntroduction:!1})},n.state={currentTurn:["John","Mark","You"],currentBeach:[50,50,50,50],placedShops:{Mark:1,John:2},incomeHistory:[],nextTurn:!1,buttonBlocked:!1,showIntroduction:!0},n.nextTurn=n.nextTurn.bind(Object(d.a)(Object(d.a)(n))),n.assignPlayerShop=n.assignPlayerShop.bind(Object(d.a)(Object(d.a)(n))),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"nextTurn",value:function(){this.setState({nextTurn:!0},this.continueTurn)}},{key:"countIncome",value:function(e){for(var t=[],n=0;n<this.state.currentBeach.length;n++){var a=[];for(var r in e){var o=Math.abs(n+1-e[r]);a.push({player:r,distanceToShop:o})}for(var c=[{distanceToShop:void 0,player:void 0}],i=a,s=0;s<i.length;s++){var l=i[s];l.distanceToShop<c[0].distanceToShop||void 0===c[0].distanceToShop?c=[l]:l.distanceToShop===c[0].distanceToShop&&c.push(l)}for(var u=Math.floor(this.state.currentBeach[n]/c.length),h=c,m=0;m<h.length;m++){var d=h[m];t.push({player:d.player,income:u})}}return t}},{key:"assignPlayerShop",value:function(e){var t=e.target.dataset.num;this.placeShop(t,"You")}},{key:"placeShop",value:function(e,t){var n=this.state.placedShops;n[t]=e,this.setState({placedShops:n})}},{key:"continueTurn",value:function(){var e=!0,t=!1,n=void 0;try{for(var a,r=this.state.currentTurn[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;if(o in this.state.placedShops||"You"==o){if("You"==o&&!("You"in this.state.placedShops))break}else this.computerMakeTurn(o)}}catch(c){t=!0,n=c}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"computerMakeTurn",value:function(e){var t,n=0;if(2!=this.state.currentTurn.indexOf(e)){var a=this.state.currentBeach.slice(0);for(var r in this.state.placedShops)a[this.state.placedShops[r]-1]=0;t=a.indexOf(Math.max.apply(Math,Object(i.a)(a)))+1}else for(var o=Object.assign({},this.state.placedShops),c=0;c<this.state.currentBeach.length;c++){o[e]=c+1;var s=this.countIncome(o),l=0,u=!0,h=!1,m=void 0;try{for(var d,p=s[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;f.player===e&&(l+=f.income)}}catch(y){h=!0,m=y}finally{try{u||null==p.return||p.return()}finally{if(h)throw m}}l>=n&&(n=l,t=c+1)}this.placeShop(t,e)}},{key:"shuffle",value:function(e){var t,n,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),n=e[a],e[a]=e[t],e[t]=n;return e}},{key:"createBeachSectors",value:function(){for(var e=Math.floor(4*Math.random())+4,t=[],n=0;n<e;n++)t.push(5*Math.floor(19*Math.random()));return t}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.nextTurn&&Object.keys(this.state.placedShops).length===this.state.currentTurn.length){var t=this.countIncome(this.state.placedShops),n=this.state.incomeHistory.slice(0,this.state.incomeHistory.length);n.push(t),this.setState({nextTurn:!1,buttonBlocked:!0},function(){return setTimeout(function(){e.setState({currentTurn:e.shuffle(["John","You","Mark"]),currentBeach:e.createBeachSectors(),placedShops:{},incomeHistory:n,buttonBlocked:!1},e.continueTurn)},2e3)})}}},{key:"render",value:function(){for(var e=[{name:"John",money:0},{name:"Mark",money:0},{name:"You",money:0}],t=e,n=0;n<t.length;n++){var a=t[n],o=!0,c=!1,i=void 0;try{for(var s,l=this.state.incomeHistory[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,h=!0,m=!1,d=void 0;try{for(var p,f=u[Symbol.iterator]();!(h=(p=f.next()).done);h=!0){var y=p.value;y.player==a.name&&(a.money+=y.income)}}catch(v){m=!0,d=v}finally{try{h||null==f.return||f.return()}finally{if(m)throw d}}}}catch(v){c=!0,i=v}finally{try{o||null==l.return||l.return()}finally{if(c)throw i}}}return e.sort(function(e,t){return t.money-e.money}),r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{handleClick:this.hideIntroduction,showIntroduction:this.state.showIntroduction}),r.a.createElement(O,{beach:this.state.currentBeach,placedShops:this.state.placedShops,shoudlRender:this.state.buttonBlocked,className:"message-container"}),r.a.createElement("section",{className:"App-grid"},r.a.createElement(N,null),r.a.createElement(w,{ranking:e}),r.a.createElement(x,{placedShops:this.state.placedShops,sequence:this.state.currentTurn}),r.a.createElement(M,{buttonBlocked:this.state.buttonBlocked,handleClick:this.nextTurn,myShopPlaced:"You"in this.state.placedShops}),r.a.createElement(B,{incomeHistory:this.state.incomeHistory}),r.a.createElement(Y,{buttonDisabled:this.state.buttonBlocked,handleClick:this.assignPlayerShop,placedShops:this.state.placedShops,sectors:this.state.currentBeach})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,1,2]]]);
//# sourceMappingURL=main.1540b23f.chunk.js.map